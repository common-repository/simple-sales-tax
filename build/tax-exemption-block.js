(()=>{"use strict";var e,a={959:()=>{const e=window.React,a=window.wp.element,t=(0,a.forwardRef)((function({icon:e,size:t=24,...l},s){return(0,a.cloneElement)(e,{width:t,height:t,...l,ref:s})})),l=window.wp.primitives,s=(0,e.createElement)(l.SVG,{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24"},(0,e.createElement)(l.Path,{fillRule:"evenodd",d:"M6.5 8a1.5 1.5 0 103 0 1.5 1.5 0 00-3 0zM8 5a3 3 0 100 6 3 3 0 000-6zm6.5 11a1.5 1.5 0 103 0 1.5 1.5 0 00-3 0zm1.5-3a3 3 0 100 6 3 3 0 000-6zM5.47 17.41a.75.75 0 001.06 1.06L18.47 6.53a.75.75 0 10-1.06-1.06L5.47 17.41z",clipRule:"evenodd"})),r=window.wp.blocks,i=window.wp.blockEditor,n=window.wp.components,o=window.wp.data,c=window.wp.i18n,u=window.wc.wcSettings,p=(0,e.createElement)(l.SVG,{viewBox:"0 0 24 24",xmlns:"http://www.w3.org/2000/svg"},(0,e.createElement)(l.Path,{d:"M17.5 11.6L12 16l-5.5-4.4.9-1.2L12 14l4.5-3.6 1 1.2z"}));function m(e){var a,t,l="";if("string"==typeof e||"number"==typeof e)l+=e;else if("object"==typeof e)if(Array.isArray(e)){var s=e.length;for(a=0;a<s;a++)e[a]&&(t=m(e[a]))&&(l&&(l+=" "),l+=t)}else for(t in e)e[t]&&(l&&(l+=" "),l+=t);return l}function d(){for(var e,a,t=0,l="",s=arguments.length;t<s;t++)(e=arguments[t])&&(a=m(e))&&(l&&(l+=" "),l+=a);return l}const _=d,x=window.wc.wcBlocksData,h=window.wc.blocksComponents,b=l=>{const{onChange:s,options:r,label:i,value:n="",className:u,size:m,errorId:d,required:b,errorMessage:E=(0,c.__)("Please select a valid option","woocommerce"),placeholder:g,...v}=l,f=(0,a.useCallback)((e=>{s(e.target.value)}),[s]),w=(0,a.useMemo)((()=>({value:"",label:null!=g?g:(0,c.sprintf)(
// translators: %s will be label of the field. For example "country/region".
// translators: %s will be label of the field. For example "country/region".
(0,c.__)("Select a %s","woocommerce"),i?.toLowerCase()),disabled:!!b})),[i,g,b]),O=(0,a.useId)(),S=v.id||`wc-blocks-components-select-${O}`,y=d||S,T=(0,a.useMemo)((()=>b&&n?r:[w].concat(r)),[b,n,w,r]),{setValidationErrors:C,clearValidationError:P}=(0,o.useDispatch)(x.VALIDATION_STORE_KEY),{error:k,validationErrorId:I}=(0,o.useSelect)((e=>{const a=e(x.VALIDATION_STORE_KEY);return{error:a.getValidationError(y),validationErrorId:a.getValidationErrorId(y)}}));(0,a.useEffect)((()=>(!b||n?P(y):C({[y]:{message:E,hidden:!0}}),()=>{P(y)})),[P,n,y,E,b,C]);const R=(0,o.useSelect)((e=>e(x.VALIDATION_STORE_KEY).getValidationError(y||"")||{hidden:!0}));return(0,e.createElement)("div",{className:_(u,{"has-error":!R.hidden})},(0,e.createElement)("div",{className:"wc-blocks-components-select"},(0,e.createElement)("div",{className:"wc-blocks-components-select__container"},(0,e.createElement)("label",{htmlFor:S,className:"wc-blocks-components-select__label"},i),(0,e.createElement)("select",{className:"wc-blocks-components-select__select",id:S,size:void 0!==m?m:1,onChange:f,value:n,"aria-invalid":!(!k?.message||k?.hidden),"aria-errormessage":I,...v},T.map((a=>(0,e.createElement)("option",{key:a.value,value:a.value,"data-alternate-values":`[${a.label}]`,disabled:void 0!==a.disabled&&a.disabled},a.label)))),(0,e.createElement)(t,{className:"wc-blocks-components-select__expand",icon:p}))),(0,e.createElement)(h.ValidationInputError,{propertyName:y}))},E=window.wc.blocksCheckout,g=window.wp.htmlEntities,v=(e,a)=>{const t=a.find((a=>a.label.toLocaleUpperCase()===e.toLocaleUpperCase()||a.value.toLocaleUpperCase()===e.toLocaleUpperCase()));return t?t.value:""},f=({className:t,id:l,states:s,country:r,label:i,onChange:n,autoComplete:o="off",value:c="",required:u=!1})=>{const p=s[r],m=(0,a.useMemo)((()=>p&&Object.keys(p).length>0?Object.keys(p).map((e=>({value:e,label:(0,g.decodeEntities)(p[e])}))):[]),[p]),_=(0,a.useCallback)((e=>{const a=m.length>0?v(e,m):e;a!==c&&n(a)}),[n,m,c]),x=(0,a.useRef)(c);return(0,a.useEffect)((()=>{x.current!==c&&(x.current=c)}),[c]),(0,a.useEffect)((()=>{if(m.length>0&&x.current){const e=v(x.current,m);e!==x.current&&_(e)}}),[m,_]),m.length>0?(0,e.createElement)(b,{className:d(t,"wc-block-components-state-input"),options:m,label:i||"",id:l,onChange:_,value:c,autoComplete:o,required:u}):(0,e.createElement)(h.ValidatedTextInput,{className:t,id:l,label:i,onChange:_,autoComplete:o,value:c,required:u})},w=(0,u.getSetting)("wcBlocksConfig",{pluginUrl:"",productCount:0,defaultAvatar:"",restApiRoutes:{},wordCountType:"words"}),O=(w.pluginUrl,w.pluginUrl,u.STORE_PAGES.shop,u.STORE_PAGES.checkout,u.STORE_PAGES.checkout,u.STORE_PAGES.privacy,u.STORE_PAGES.privacy,u.STORE_PAGES.terms,u.STORE_PAGES.terms,u.STORE_PAGES.cart,u.STORE_PAGES.cart,u.STORE_PAGES.myaccount?.permalink?u.STORE_PAGES.myaccount.permalink:(0,u.getSetting)("wpLoginUrl","/wp-login.php"),(0,u.getSetting)("localPickupEnabled",!1),(0,u.getSetting)("countries",{})),S=(0,u.getSetting)("countryData",{}),y=(Object.fromEntries(Object.keys(S).filter((e=>!0===S[e].allowBilling)).map((e=>[e,O[e]||""]))),Object.fromEntries(Object.keys(S).filter((e=>!0===S[e].allowBilling)).map((e=>[e,S[e].states||[]])))),T=(Object.fromEntries(Object.keys(S).filter((e=>!0===S[e].allowShipping)).map((e=>[e,O[e]||""]))),Object.fromEntries(Object.keys(S).filter((e=>!0===S[e].allowShipping)).map((e=>[e,S[e].states||[]]))),Object.fromEntries(Object.keys(S).map((e=>[e,S[e].locale||[]]))),{address:["first_name","last_name","company","address_1","address_2","city","postcode","country","state","phone"],contact:["email"],order:[]}),C=((0,u.getSetting)("addressFieldsLocations",T).address,(0,u.getSetting)("addressFieldsLocations",T).contact,(0,u.getSetting)("addressFieldsLocations",T).order,(0,u.getSetting)("additionalOrderFields",{}),(0,u.getSetting)("additionalContactFields",{}),(0,u.getSetting)("additionalAddressFields",{}),[{value:"",label:(0,c.__)("Select a business type","simple-sales-tax"),disabled:!0},{value:"AccommodationAndFoodServices",label:(0,c.__)("Accommodation And Food Services","simple-sales-tax")},{value:"Agricultural_Forestry_Fishing_Hunting",label:(0,c.__)("Agricultural/Forestry/Fishing/Hunting","simple-sales-tax")},{value:"Construction",label:(0,c.__)("Construction","simple-sales-tax")},{value:"FinanceAndInsurance",label:(0,c.__)("Finance or Insurance","simple-sales-tax")},{value:"Information_PublishingAndCommunications",label:(0,c.__)("Information Publishing and Communications","simple-sales-tax")},{value:"Manufacturing",label:(0,c.__)("Manufacturing","simple-sales-tax")},{value:"Mining",label:(0,c.__)("Mining","simple-sales-tax")},{value:"RealEstate",label:(0,c.__)("Real Estate","simple-sales-tax")},{value:"RentalAndLeasing",label:(0,c.__)("Rental and Leasing","simple-sales-tax")},{value:"RetailTrade",label:(0,c.__)("Retail Trade","simple-sales-tax")},{value:"TransportationAndWarehousing",label:(0,c.__)("Transportation and Warehousing","simple-sales-tax")},{value:"Utilities",label:(0,c.__)("Utilities","simple-sales-tax")},{value:"WholesaleTrade",label:(0,c.__)("Wholesale Trade","simple-sales-tax")},{value:"BusinessServices",label:(0,c.__)("Business Services","simple-sales-tax")},{value:"ProfessionalServices",label:(0,c.__)("Professional Services","simple-sales-tax")},{value:"EducationAndHealthCareServices",label:(0,c.__)("Education and Health Care Services","simple-sales-tax")},{value:"NonprofitOrganization",label:(0,c.__)("Nonprofit Organization","simple-sales-tax")},{value:"Government",label:(0,c.__)("Government","simple-sales-tax")},{value:"NotABusiness",label:(0,c.__)("Not a Business","simple-sales-tax")},{value:"Other",label:(0,c.__)("Other","simple-sales-tax")}]),P=[{value:"",label:(0,c.__)("Select a reason","simple-sales-tax"),disabled:!0},{value:"FederalGovernmentDepartment",label:(0,c.__)("Federal Government Department","simple-sales-tax")},{value:"StateOrLocalGovernmentName",label:(0,c.__)("State Or Local Government","simple-sales-tax")},{value:"TribalGovernmentName",label:(0,c.__)("Tribal Government","simple-sales-tax")},{value:"ForeignDiplomat",label:(0,c.__)("Foreign Diplomat","simple-sales-tax")},{value:"CharitableOrganization",label:(0,c.__)("Charitable Organization","simple-sales-tax")},{value:"ReligiousOrEducationalOrganization",label:(0,c.__)("Religious or Educational Organization","simple-sales-tax")},{value:"Resale",label:(0,c.__)("Resale","simple-sales-tax")},{value:"AgriculturalProduction",label:(0,c.__)("Agricultural Production","simple-sales-tax")},{value:"IndustrialProductionOrManufacturing",label:(0,c.__)("Industrial Production or Manufacturing","simple-sales-tax")},{value:"DirectPayPermit",label:(0,c.__)("Direct Pay Permit","simple-sales-tax")},{value:"DirectMail",label:(0,c.__)("Direct Mail","simple-sales-tax")},{value:"Other",label:(0,c.__)("Other","simple-sales-tax")}],k="simple-sales-tax",I=(e,t)=>{const{__internalSetExtensionData:l}=(0,o.useDispatch)(x.CHECKOUT_STORE_KEY),s=(0,o.useSelect)((a=>{var l;const s=a(x.CHECKOUT_STORE_KEY).getExtensionData();return null!==(l=s[k]?.[e])&&void 0!==l?l:t})),r=(0,a.useCallback)((a=>{l(k,{[e]:a})}),[l]);return(0,a.useEffect)((()=>{r(t)}),[t,r]),[s,r]},R={SinglePurchase:!1,ExemptState:"",TaxType:"StateIssued",StateOfIssue:"",IDNumber:"",PurchaserBusinessType:"",PurchaserBusinessTypeOtherValue:"",PurchaserExemptionReason:"",PurchaserExemptionReasonOtherValue:""},A=()=>{const[a,t]=I("certificate",R),l=(e,l)=>{t({...a,[e]:l})},{businessTypeOtherError:s,exemptionReasonOtherError:r}=(0,o.useSelect)((e=>{const a=e(x.VALIDATION_STORE_KEY);return{businessTypeOtherError:a.getValidationError("purchase_business_type_other_value_error"),exemptionReasonOtherError:a.getValidationError("purchaser_exemption_reason_value_error")}})),i=e=>!!e?.message&&!e?.hidden;return(0,e.createElement)("div",{className:"sst-tax-exemption__form"},(0,e.createElement)("p",{class:"sst-tax-exemption__form-disclaimer"},(0,e.createElement)("strong",null,(0,c.__)("WARNING:","simple-sales-tax")),(0,c.__)("You are responsible for knowing if you qualify to claim exemption from tax in the state that is due tax on this sale. You  will be held liable for any tax and interest, as well as civil and criminal penalties imposed by the member state, if you are not eligible to claim this exemption.","simple-sales-tax")),(0,e.createElement)(E.CheckboxControl,{id:"single_purchase",checked:a.SinglePurchase,onChange:e=>l("SinglePurchase",e)},(0,c.__)("This is a single-purchase exemption certificate","simple-sales-tax")),(0,e.createElement)(f,{id:"exempt_state",label:(0,c.__)("Exempt state","simple-sales-tax"),country:"US",states:y,value:a.ExemptState,onChange:e=>l("ExemptState",e),required:!0}),(0,e.createElement)("div",{className:"sst-radio-group",role:"radiogroup",id:"tax_type",ariaLabelledBy:"tax_type_label"},(0,e.createElement)("label",{id:"tax_type_label"},(0,c.__)("Tax ID type","simple-sales-tax")),(0,e.createElement)(h.RadioControl,{id:"tax_type",selected:a.TaxType,options:[{label:(0,c.__)("State Issued Exemption ID or Drivers License","simple-sales-tax"),value:"StateIssued"},{label:(0,c.__)("Federal Employer ID","simple-sales-tax"),value:"FEIN"}],onChange:e=>l("TaxType",e)})),"StateIssued"===a.TaxType&&(0,e.createElement)(f,{id:"state_of_issue",label:(0,c.__)("Issuing state","simple-sales-tax"),country:"US",states:y,value:a.StateOfIssue,onChange:e=>l("StateOfIssue",e),required:!0}),(0,e.createElement)(h.ValidatedTextInput,{id:"id_number",errorId:"id_number_error",label:(0,c.__)("Tax ID","simple-sales-tax"),required:!0,type:"text",value:a.IDNumber,onChange:e=>l("IDNumber",e)}),(0,e.createElement)(b,{id:"purchaser_business_type",label:(0,c.__)("Business type","simple-sales-tax"),onChange:e=>l("PurchaserBusinessType",e),options:C,value:a.PurchaserBusinessType,required:!0}),"Other"===a.PurchaserBusinessType&&(0,e.createElement)(h.ValidatedTextInput,{id:"purchase_business_type_other_value",errorId:"purchase_business_type_other_value_error",label:(0,c.__)("Explain the nature of your business","simple-sales-tax"),required:!0,type:"text",value:a.PurchaserBusinessTypeOtherValue,onChange:e=>l("PurchaserBusinessTypeOtherValue",e),showError:i(s),errorMessage:(0,c.__)("Please explain the nature of your business","simple-sales-tax")}),(0,e.createElement)(b,{id:"purchaser_exemption_reason",label:(0,c.__)("Reason for exemption","simple-sales-tax"),onChange:e=>l("PurchaserExemptionReason",e),options:P,value:a.PurchaserExemptionReason,required:!0}),"Other"===a.PurchaserExemptionReason&&(0,e.createElement)(h.ValidatedTextInput,{id:"purchaser_exemption_reason_value",errorId:"purchaser_exemption_reason_value_error",label:(0,c.__)("Please explain","simple-sales-tax"),required:!0,type:"text",value:a.PurchaserExemptionReasonOtherValue,onChange:e=>l("PurchaserExemptionReasonOtherValue",e),showError:i(r),errorMessage:(0,c.__)("Please explain why you are tax exempt","simple-sales-tax")}))},{showExemptionForm:N,certificateOptions:D,selectedCertificate:L,isUserLoggedIn:V,myAccountEndpointUrl:B}=(0,u.getSetting)("simple-sales-tax_data",""),F=Object.entries(D).map((([e,a])=>({value:e,label:a}))),G=({className:a,children:t})=>{if(!N)return null;const[l,s]=I("certificate_id",L),{__internalIncrementCalculating:r,__internalDecrementCalculating:i}=(0,o.useDispatch)(x.CHECKOUT_STORE_KEY);return(0,e.createElement)("div",{className:a},(0,e.createElement)(h.Title,{headingLevel:"2"},(0,c.__)("Tax exemption","simple-sales-tax")),!V&&(0,e.createElement)("p",null,(0,c.__)("Please log in or register to apply an exemption certificate.","simple-sales-tax")),V&&(0,e.createElement)(e.Fragment,null,(0,e.createElement)(b,{id:"exemption-certificate-input",label:(0,c.__)("Exemption certificate","simple-sales-tax"),onChange:e=>{s(e),r(),(0,E.extensionCartUpdate)({namespace:"simple-sales-tax",data:{action:"set_certificate_id",certificate_id:e}}).finally((()=>{i()}))},options:F,value:l}),(0,e.createElement)("a",{href:B,target:"_blank"},(0,c.__)("Manage exemption certificates →","simple-sales-tax")),"new"===l&&(0,e.createElement)(A,null)))},M=JSON.parse('{"apiVersion":2,"name":"simple-sales-tax/tax-exemption","version":"1.0.0","title":"Tax Exemption Block","category":"woocommerce","description":"Adds a tax exemption form to the checkout.","supports":{"html":false,"align":false,"multiple":false,"reusable":false},"parent":["woocommerce/checkout-fields-block"],"textdomain":"simple-sales-tax"}');(0,r.registerBlockType)(M,{icon:{src:(0,e.createElement)(t,{icon:s,className:"wc-block-editor-components-block-icon"})},edit:()=>{const a=(0,i.useBlockProps)();return(0,e.createElement)("div",{...a},(0,e.createElement)(n.Disabled,null,(0,e.createElement)(G,null)))},save:()=>(0,e.createElement)("div",{"data-block-name":"simple-sales-tax/tax-exemption",...i.useBlockProps.save()})})}},t={};function l(e){var s=t[e];if(void 0!==s)return s.exports;var r=t[e]={exports:{}};return a[e](r,r.exports,l),r.exports}l.m=a,e=[],l.O=(a,t,s,r)=>{if(!t){var i=1/0;for(u=0;u<e.length;u++){t=e[u][0],s=e[u][1],r=e[u][2];for(var n=!0,o=0;o<t.length;o++)(!1&r||i>=r)&&Object.keys(l.O).every((e=>l.O[e](t[o])))?t.splice(o--,1):(n=!1,r<i&&(i=r));if(n){e.splice(u--,1);var c=s();void 0!==c&&(a=c)}}return a}r=r||0;for(var u=e.length;u>0&&e[u-1][2]>r;u--)e[u]=e[u-1];e[u]=[t,s,r]},l.o=(e,a)=>Object.prototype.hasOwnProperty.call(e,a),(()=>{var e={476:0,575:0};l.O.j=a=>0===e[a];var a=(a,t)=>{var s,r,i=t[0],n=t[1],o=t[2],c=0;if(i.some((a=>0!==e[a]))){for(s in n)l.o(n,s)&&(l.m[s]=n[s]);if(o)var u=o(l)}for(a&&a(t);c<i.length;c++)r=i[c],l.o(e,r)&&e[r]&&e[r][0](),e[r]=0;return l.O(u)},t=self.webpackChunksimplesalestax=self.webpackChunksimplesalestax||[];t.forEach(a.bind(null,0)),t.push=a.bind(null,t.push.bind(t))})();var s=l.O(void 0,[575],(()=>l(959)));s=l.O(s)})();