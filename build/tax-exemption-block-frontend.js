(()=>{"use strict";var e,a={728:()=>{const e=window.wc.blocksCheckout,a=window.React,t=window.wp.data,s=window.wp.i18n,l=window.wc.wcSettings,r=window.wp.element,i=(0,r.forwardRef)((function({icon:e,size:a=24,...t},s){return(0,r.cloneElement)(e,{width:a,height:a,...t,ref:s})})),n=window.wp.primitives,o=(0,a.createElement)(n.SVG,{viewBox:"0 0 24 24",xmlns:"http://www.w3.org/2000/svg"},(0,a.createElement)(n.Path,{d:"M17.5 11.6L12 16l-5.5-4.4.9-1.2L12 14l4.5-3.6 1 1.2z"}));function c(e){var a,t,s="";if("string"==typeof e||"number"==typeof e)s+=e;else if("object"==typeof e)if(Array.isArray(e)){var l=e.length;for(a=0;a<l;a++)e[a]&&(t=c(e[a]))&&(s&&(s+=" "),s+=t)}else for(t in e)e[t]&&(s&&(s+=" "),s+=t);return s}function u(){for(var e,a,t=0,s="",l=arguments.length;t<l;t++)(e=arguments[t])&&(a=c(e))&&(s&&(s+=" "),s+=a);return s}const p=u,m=window.wc.wcBlocksData,d=window.wc.blocksComponents,_=e=>{const{onChange:l,options:n,label:c,value:u="",className:_,size:x,errorId:h,required:g,errorMessage:b=(0,s.__)("Please select a valid option","woocommerce"),placeholder:E,...v}=e,f=(0,r.useCallback)((e=>{l(e.target.value)}),[l]),O=(0,r.useMemo)((()=>({value:"",label:null!=E?E:(0,s.sprintf)(
// translators: %s will be label of the field. For example "country/region".
// translators: %s will be label of the field. For example "country/region".
(0,s.__)("Select a %s","woocommerce"),c?.toLowerCase()),disabled:!!g})),[c,E,g]),S=(0,r.useId)(),y=v.id||`wc-blocks-components-select-${S}`,w=h||y,T=(0,r.useMemo)((()=>g&&u?n:[O].concat(n)),[g,u,O,n]),{setValidationErrors:C,clearValidationError:P}=(0,t.useDispatch)(m.VALIDATION_STORE_KEY),{error:I,validationErrorId:R}=(0,t.useSelect)((e=>{const a=e(m.VALIDATION_STORE_KEY);return{error:a.getValidationError(w),validationErrorId:a.getValidationErrorId(w)}}));(0,r.useEffect)((()=>(!g||u?P(w):C({[w]:{message:b,hidden:!0}}),()=>{P(w)})),[P,u,w,b,g,C]);const k=(0,t.useSelect)((e=>e(m.VALIDATION_STORE_KEY).getValidationError(w||"")||{hidden:!0}));return(0,a.createElement)("div",{className:p(_,{"has-error":!k.hidden})},(0,a.createElement)("div",{className:"wc-blocks-components-select"},(0,a.createElement)("div",{className:"wc-blocks-components-select__container"},(0,a.createElement)("label",{htmlFor:y,className:"wc-blocks-components-select__label"},c),(0,a.createElement)("select",{className:"wc-blocks-components-select__select",id:y,size:void 0!==x?x:1,onChange:f,value:u,"aria-invalid":!(!I?.message||I?.hidden),"aria-errormessage":R,...v},T.map((e=>(0,a.createElement)("option",{key:e.value,value:e.value,"data-alternate-values":`[${e.label}]`,disabled:void 0!==e.disabled&&e.disabled},e.label)))),(0,a.createElement)(i,{className:"wc-blocks-components-select__expand",icon:o}))),(0,a.createElement)(d.ValidationInputError,{propertyName:w}))},x=window.wp.htmlEntities,h=(e,a)=>{const t=a.find((a=>a.label.toLocaleUpperCase()===e.toLocaleUpperCase()||a.value.toLocaleUpperCase()===e.toLocaleUpperCase()));return t?t.value:""},g=({className:e,id:t,states:s,country:l,label:i,onChange:n,autoComplete:o="off",value:c="",required:p=!1})=>{const m=s[l],g=(0,r.useMemo)((()=>m&&Object.keys(m).length>0?Object.keys(m).map((e=>({value:e,label:(0,x.decodeEntities)(m[e])}))):[]),[m]),b=(0,r.useCallback)((e=>{const a=g.length>0?h(e,g):e;a!==c&&n(a)}),[n,g,c]),E=(0,r.useRef)(c);return(0,r.useEffect)((()=>{E.current!==c&&(E.current=c)}),[c]),(0,r.useEffect)((()=>{if(g.length>0&&E.current){const e=h(E.current,g);e!==E.current&&b(e)}}),[g,b]),g.length>0?(0,a.createElement)(_,{className:u(e,"wc-block-components-state-input"),options:g,label:i||"",id:t,onChange:b,value:c,autoComplete:o,required:p}):(0,a.createElement)(d.ValidatedTextInput,{className:e,id:t,label:i,onChange:b,autoComplete:o,value:c,required:p})},b=(0,l.getSetting)("wcBlocksConfig",{pluginUrl:"",productCount:0,defaultAvatar:"",restApiRoutes:{},wordCountType:"words"}),E=(b.pluginUrl,b.pluginUrl,l.STORE_PAGES.shop,l.STORE_PAGES.checkout,l.STORE_PAGES.checkout,l.STORE_PAGES.privacy,l.STORE_PAGES.privacy,l.STORE_PAGES.terms,l.STORE_PAGES.terms,l.STORE_PAGES.cart,l.STORE_PAGES.cart,l.STORE_PAGES.myaccount?.permalink?l.STORE_PAGES.myaccount.permalink:(0,l.getSetting)("wpLoginUrl","/wp-login.php"),(0,l.getSetting)("localPickupEnabled",!1),(0,l.getSetting)("countries",{})),v=(0,l.getSetting)("countryData",{}),f=(Object.fromEntries(Object.keys(v).filter((e=>!0===v[e].allowBilling)).map((e=>[e,E[e]||""]))),Object.fromEntries(Object.keys(v).filter((e=>!0===v[e].allowBilling)).map((e=>[e,v[e].states||[]])))),O=(Object.fromEntries(Object.keys(v).filter((e=>!0===v[e].allowShipping)).map((e=>[e,E[e]||""]))),Object.fromEntries(Object.keys(v).filter((e=>!0===v[e].allowShipping)).map((e=>[e,v[e].states||[]]))),Object.fromEntries(Object.keys(v).map((e=>[e,v[e].locale||[]]))),{address:["first_name","last_name","company","address_1","address_2","city","postcode","country","state","phone"],contact:["email"],order:[]}),S=((0,l.getSetting)("addressFieldsLocations",O).address,(0,l.getSetting)("addressFieldsLocations",O).contact,(0,l.getSetting)("addressFieldsLocations",O).order,(0,l.getSetting)("additionalOrderFields",{}),(0,l.getSetting)("additionalContactFields",{}),(0,l.getSetting)("additionalAddressFields",{}),[{value:"",label:(0,s.__)("Select a business type","simple-sales-tax"),disabled:!0},{value:"AccommodationAndFoodServices",label:(0,s.__)("Accommodation And Food Services","simple-sales-tax")},{value:"Agricultural_Forestry_Fishing_Hunting",label:(0,s.__)("Agricultural/Forestry/Fishing/Hunting","simple-sales-tax")},{value:"Construction",label:(0,s.__)("Construction","simple-sales-tax")},{value:"FinanceAndInsurance",label:(0,s.__)("Finance or Insurance","simple-sales-tax")},{value:"Information_PublishingAndCommunications",label:(0,s.__)("Information Publishing and Communications","simple-sales-tax")},{value:"Manufacturing",label:(0,s.__)("Manufacturing","simple-sales-tax")},{value:"Mining",label:(0,s.__)("Mining","simple-sales-tax")},{value:"RealEstate",label:(0,s.__)("Real Estate","simple-sales-tax")},{value:"RentalAndLeasing",label:(0,s.__)("Rental and Leasing","simple-sales-tax")},{value:"RetailTrade",label:(0,s.__)("Retail Trade","simple-sales-tax")},{value:"TransportationAndWarehousing",label:(0,s.__)("Transportation and Warehousing","simple-sales-tax")},{value:"Utilities",label:(0,s.__)("Utilities","simple-sales-tax")},{value:"WholesaleTrade",label:(0,s.__)("Wholesale Trade","simple-sales-tax")},{value:"BusinessServices",label:(0,s.__)("Business Services","simple-sales-tax")},{value:"ProfessionalServices",label:(0,s.__)("Professional Services","simple-sales-tax")},{value:"EducationAndHealthCareServices",label:(0,s.__)("Education and Health Care Services","simple-sales-tax")},{value:"NonprofitOrganization",label:(0,s.__)("Nonprofit Organization","simple-sales-tax")},{value:"Government",label:(0,s.__)("Government","simple-sales-tax")},{value:"NotABusiness",label:(0,s.__)("Not a Business","simple-sales-tax")},{value:"Other",label:(0,s.__)("Other","simple-sales-tax")}]),y=[{value:"",label:(0,s.__)("Select a reason","simple-sales-tax"),disabled:!0},{value:"FederalGovernmentDepartment",label:(0,s.__)("Federal Government Department","simple-sales-tax")},{value:"StateOrLocalGovernmentName",label:(0,s.__)("State Or Local Government","simple-sales-tax")},{value:"TribalGovernmentName",label:(0,s.__)("Tribal Government","simple-sales-tax")},{value:"ForeignDiplomat",label:(0,s.__)("Foreign Diplomat","simple-sales-tax")},{value:"CharitableOrganization",label:(0,s.__)("Charitable Organization","simple-sales-tax")},{value:"ReligiousOrEducationalOrganization",label:(0,s.__)("Religious or Educational Organization","simple-sales-tax")},{value:"Resale",label:(0,s.__)("Resale","simple-sales-tax")},{value:"AgriculturalProduction",label:(0,s.__)("Agricultural Production","simple-sales-tax")},{value:"IndustrialProductionOrManufacturing",label:(0,s.__)("Industrial Production or Manufacturing","simple-sales-tax")},{value:"DirectPayPermit",label:(0,s.__)("Direct Pay Permit","simple-sales-tax")},{value:"DirectMail",label:(0,s.__)("Direct Mail","simple-sales-tax")},{value:"Other",label:(0,s.__)("Other","simple-sales-tax")}],w="simple-sales-tax",T=(e,a)=>{const{__internalSetExtensionData:s}=(0,t.useDispatch)(m.CHECKOUT_STORE_KEY),l=(0,t.useSelect)((t=>{var s;const l=t(m.CHECKOUT_STORE_KEY).getExtensionData();return null!==(s=l[w]?.[e])&&void 0!==s?s:a})),i=(0,r.useCallback)((a=>{s(w,{[e]:a})}),[s]);return(0,r.useEffect)((()=>{i(a)}),[a,i]),[l,i]},C={SinglePurchase:!1,ExemptState:"",TaxType:"StateIssued",StateOfIssue:"",IDNumber:"",PurchaserBusinessType:"",PurchaserBusinessTypeOtherValue:"",PurchaserExemptionReason:"",PurchaserExemptionReasonOtherValue:""},P=()=>{const[l,r]=T("certificate",C),i=(e,a)=>{r({...l,[e]:a})},{businessTypeOtherError:n,exemptionReasonOtherError:o}=(0,t.useSelect)((e=>{const a=e(m.VALIDATION_STORE_KEY);return{businessTypeOtherError:a.getValidationError("purchase_business_type_other_value_error"),exemptionReasonOtherError:a.getValidationError("purchaser_exemption_reason_value_error")}})),c=e=>!!e?.message&&!e?.hidden;return(0,a.createElement)("div",{className:"sst-tax-exemption__form"},(0,a.createElement)("p",{class:"sst-tax-exemption__form-disclaimer"},(0,a.createElement)("strong",null,(0,s.__)("WARNING:","simple-sales-tax")),(0,s.__)("You are responsible for knowing if you qualify to claim exemption from tax in the state that is due tax on this sale. You  will be held liable for any tax and interest, as well as civil and criminal penalties imposed by the member state, if you are not eligible to claim this exemption.","simple-sales-tax")),(0,a.createElement)(e.CheckboxControl,{id:"single_purchase",checked:l.SinglePurchase,onChange:e=>i("SinglePurchase",e)},(0,s.__)("This is a single-purchase exemption certificate","simple-sales-tax")),(0,a.createElement)(g,{id:"exempt_state",label:(0,s.__)("Exempt state","simple-sales-tax"),country:"US",states:f,value:l.ExemptState,onChange:e=>i("ExemptState",e),required:!0}),(0,a.createElement)("div",{className:"sst-radio-group",role:"radiogroup",id:"tax_type",ariaLabelledBy:"tax_type_label"},(0,a.createElement)("label",{id:"tax_type_label"},(0,s.__)("Tax ID type","simple-sales-tax")),(0,a.createElement)(d.RadioControl,{id:"tax_type",selected:l.TaxType,options:[{label:(0,s.__)("State Issued Exemption ID or Drivers License","simple-sales-tax"),value:"StateIssued"},{label:(0,s.__)("Federal Employer ID","simple-sales-tax"),value:"FEIN"}],onChange:e=>i("TaxType",e)})),"StateIssued"===l.TaxType&&(0,a.createElement)(g,{id:"state_of_issue",label:(0,s.__)("Issuing state","simple-sales-tax"),country:"US",states:f,value:l.StateOfIssue,onChange:e=>i("StateOfIssue",e),required:!0}),(0,a.createElement)(d.ValidatedTextInput,{id:"id_number",errorId:"id_number_error",label:(0,s.__)("Tax ID","simple-sales-tax"),required:!0,type:"text",value:l.IDNumber,onChange:e=>i("IDNumber",e)}),(0,a.createElement)(_,{id:"purchaser_business_type",label:(0,s.__)("Business type","simple-sales-tax"),onChange:e=>i("PurchaserBusinessType",e),options:S,value:l.PurchaserBusinessType,required:!0}),"Other"===l.PurchaserBusinessType&&(0,a.createElement)(d.ValidatedTextInput,{id:"purchase_business_type_other_value",errorId:"purchase_business_type_other_value_error",label:(0,s.__)("Explain the nature of your business","simple-sales-tax"),required:!0,type:"text",value:l.PurchaserBusinessTypeOtherValue,onChange:e=>i("PurchaserBusinessTypeOtherValue",e),showError:c(n),errorMessage:(0,s.__)("Please explain the nature of your business","simple-sales-tax")}),(0,a.createElement)(_,{id:"purchaser_exemption_reason",label:(0,s.__)("Reason for exemption","simple-sales-tax"),onChange:e=>i("PurchaserExemptionReason",e),options:y,value:l.PurchaserExemptionReason,required:!0}),"Other"===l.PurchaserExemptionReason&&(0,a.createElement)(d.ValidatedTextInput,{id:"purchaser_exemption_reason_value",errorId:"purchaser_exemption_reason_value_error",label:(0,s.__)("Please explain","simple-sales-tax"),required:!0,type:"text",value:l.PurchaserExemptionReasonOtherValue,onChange:e=>i("PurchaserExemptionReasonOtherValue",e),showError:c(o),errorMessage:(0,s.__)("Please explain why you are tax exempt","simple-sales-tax")}))},{showExemptionForm:I,certificateOptions:R,selectedCertificate:k,isUserLoggedIn:A,myAccountEndpointUrl:N}=(0,l.getSetting)("simple-sales-tax_data",""),D=Object.entries(R).map((([e,a])=>({value:e,label:a}))),V=JSON.parse('{"apiVersion":2,"name":"simple-sales-tax/tax-exemption","version":"1.0.0","title":"Tax Exemption Block","category":"woocommerce","description":"Adds a tax exemption form to the checkout.","supports":{"html":false,"align":false,"multiple":false,"reusable":false},"parent":["woocommerce/checkout-fields-block"],"textdomain":"simple-sales-tax"}');(0,e.registerCheckoutBlock)({metadata:V,component:({className:l,children:r})=>{if(!I)return null;const[i,n]=T("certificate_id",k),{__internalIncrementCalculating:o,__internalDecrementCalculating:c}=(0,t.useDispatch)(m.CHECKOUT_STORE_KEY);return(0,a.createElement)("div",{className:l},(0,a.createElement)(d.Title,{headingLevel:"2"},(0,s.__)("Tax exemption","simple-sales-tax")),!A&&(0,a.createElement)("p",null,(0,s.__)("Please log in or register to apply an exemption certificate.","simple-sales-tax")),A&&(0,a.createElement)(a.Fragment,null,(0,a.createElement)(_,{id:"exemption-certificate-input",label:(0,s.__)("Exemption certificate","simple-sales-tax"),onChange:a=>{n(a),o(),(0,e.extensionCartUpdate)({namespace:"simple-sales-tax",data:{action:"set_certificate_id",certificate_id:a}}).finally((()=>{c()}))},options:D,value:i}),(0,a.createElement)("a",{href:N,target:"_blank"},(0,s.__)("Manage exemption certificates →","simple-sales-tax")),"new"===i&&(0,a.createElement)(P,null)))}})}},t={};function s(e){var l=t[e];if(void 0!==l)return l.exports;var r=t[e]={exports:{}};return a[e](r,r.exports,s),r.exports}s.m=a,e=[],s.O=(a,t,l,r)=>{if(!t){var i=1/0;for(u=0;u<e.length;u++){t=e[u][0],l=e[u][1],r=e[u][2];for(var n=!0,o=0;o<t.length;o++)(!1&r||i>=r)&&Object.keys(s.O).every((e=>s.O[e](t[o])))?t.splice(o--,1):(n=!1,r<i&&(i=r));if(n){e.splice(u--,1);var c=l();void 0!==c&&(a=c)}}return a}r=r||0;for(var u=e.length;u>0&&e[u-1][2]>r;u--)e[u]=e[u-1];e[u]=[t,l,r]},s.o=(e,a)=>Object.prototype.hasOwnProperty.call(e,a),(()=>{var e={293:0,575:0};s.O.j=a=>0===e[a];var a=(a,t)=>{var l,r,i=t[0],n=t[1],o=t[2],c=0;if(i.some((a=>0!==e[a]))){for(l in n)s.o(n,l)&&(s.m[l]=n[l]);if(o)var u=o(s)}for(a&&a(t);c<i.length;c++)r=i[c],s.o(e,r)&&e[r]&&e[r][0](),e[r]=0;return s.O(u)},t=self.webpackChunksimplesalestax=self.webpackChunksimplesalestax||[];t.forEach(a.bind(null,0)),t.push=a.bind(null,t.push.bind(t))})();var l=s.O(void 0,[575],(()=>s(728)));l=s.O(l)})();